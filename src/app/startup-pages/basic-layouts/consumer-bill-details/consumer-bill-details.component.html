<ngx-no-column-layout>
    <div>

        <ngx-basic-top-navbar></ngx-basic-top-navbar>
        <div style="margin-top: 7rem;">
            <nb-card>
                <nb-card-header class="header-section">Consumer Bill</nb-card-header>
                <nb-card-body>
                    <form [formGroup]="consumerBillForm">
                        <div class="row">

                            <div class="col-sm-6">
                                <div class="form-group row">
                                    <label for="consumerNumber" class="label col-sm-4 col-form-label">Consumer
                                        Number<span class="text-danger">*</span> :</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" formControlName="consumerNumber">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">

                            <div class="col-sm-6">
                                <div class="form-group row">
                                    <label for="locationCode" class="label col-sm-4 col-form-label">Bill Number<span
                                            class="text-danger">*</span> :</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" formControlName="billNumber">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group row">
                                    <div class="col-sm-4"></div>
                                    <div class="col-sm-8">
                                        <button class=" btn btn-success px-5"
                                            (click)="getbillDetailsByBillNumbr()">Search</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div *ngIf="isShow">
                            <div class="row">

                                <div class="col-sm-6">
                                    <div class="form-group row">
                                        <label for="consumerNumber" class="label col-sm-4 col-form-label ">Consumer
                                            Number :</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control no-border"
                                                formControlName="consumerNumber" readonly>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-sm-6">
                                    <div class="form-group row">
                                        <label for="consumerName" class="label col-sm-4 col-form-label ">Consumer Name
                                            :</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control no-border"
                                                formControlName="customerName" readonly>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group row">
                                        <label for="locationDescription" class="label col-sm-4 col-form-label ">Location
                                            Description:</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control no-border"
                                                formControlName="locationCode" readonly>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-sm-6">
                                    <div class="form-group row">
                                        <label for="areaCode" class="label col-sm-4 col-form-label "> Customer
                                            Address:</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control no-border"
                                                formControlName="customerAddress" readonly>
                                        </div>
                                    </div>
                                </div>

                            </div>

                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group row">
                                        <label for="nidNumber" class="label col-sm-4 col-form-label ">Phone
                                            Number:</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control no-border" formControlName="phone"
                                                readonly>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </form>

                    <div *ngIf="isShow">

                        <!-- Data Table -->


                        <div class="wrapper wrapper-content animated fadeInRight">
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="ibox">
                                        <div class="ibox-content">
                                            <div class="table-responsive">
                                                <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger"
                                                    class="table table-striped table-bordered table-hover dataTables-example">
                                                    <thead>
                                                        <tr class="text-center">
                                                            <th class="text-center" style="width: 5%;">SN</th>
                                                            <th class="text-center" style="width: 10%;">Consumer Number
                                                            </th>
                                                            <th class="text-center" style="width: 10%;">Bill Number</th>
                                                            <th class="text-center" style="width: 10%;">Principle Amount
                                                            </th>
                                                            <th class="text-center" style="width: 10%;">Vat Amount</th>
                                                            <th class="text-center" style="width: 10%;">Total Amount
                                                            </th>
                                                            <th class="text-center" style="width: 10%;">Action</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr class="text-center"
                                                            *ngFor="let bill of customerDetails; let i =index">
                                                            <th style="width: 5%;">{{i+1}}</th>
                                                            <td style="width: 10%;">{{bill.customerNumber}}</td>
                                                            <td style="width: 10%;">{{bill.billNumber}}</td>
                                                            <td style="width: 10%;">{{bill.principleAmount}}</td>
                                                            <td style="width: 10%;">{{bill.vatAmount}}</td>
                                                            <td style="width: 10%;">{{bill.totalAmount}}</td>
                                                            <td style="width: 10%;">
                                                                <button *ngIf="bill.paid=='Paid'" disabled
                                                                    class="btn btn-sm btn-primary px-2">Paid</button>
                                                                <button *ngIf="bill.paid=='UnPaid'"
                                                                    (click)="paymnetGateway(bill)"
                                                                    class="btn btn-sm btn-success">Pay Now</button>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </nb-card-body>
            </nb-card>
        </div>
    </div>
</ngx-no-column-layout>