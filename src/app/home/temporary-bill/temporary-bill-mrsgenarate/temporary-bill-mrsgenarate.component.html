<nb-card>
    <nb-card-header class="header-section">MRS,Bill Genarate & Bill Print</nb-card-header>
    <nb-card-body>
        <form [formGroup]="temporarybillprint">
            <div class="row">
                <div class="col-sm-6">
                    <div class="form-group row">
                        <label for="customerNumber" class="label col-sm-4 col-form-label"> Number <span
                                class="text-danger">*</span> :</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" formControlName="customerNumber" fullWidth
                                placeholder="Customer Number">
                        </div>

                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group row">
                        <label for="billMonth" class="label col-sm-4 col-form-label">Bill Month <span
                                class="text-danger">*</span> :</label>
                        <div class="col-sm-8">
                            <nb-select placeholder="Select Bill Month" formControlName="billMonth" fullWidth>
                                <nb-option *ngFor="let billmonth of billMonthList"
                                    value="{{billmonth.billCycleCode}}">{{billmonth.billCycleCode}}</nb-option>
                            </nb-select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-6">
                    <div class="form-group row">
                        <div class=" col-sm-4"></div>
                        <div class="col-sm-8">
                            <button class=" btn btn-success mb-lg-5 px-2 mr-3" [disabled]="!temporarybillprint.valid" (click)="generateMrs()">MRS Genarate</button>
                            <button type="button" class="btn btn-warning  mb-lg-5 px-2 " (click)="reset()">Refresh</button>
                        </div>

                    </div>
                </div>
            </div>
            <div class="row" *ngIf="isShow">
                <table class="table table-bordered table-responsive">
                    <thead>
                        <tr>
                            <th>Customer Number</th>
                            <th>CustomerName</th>
                            <th>WalkOrder</th>
                            <th>MeterNumber</th>
                            <th>TOD</th>
                            <th>Meter Cycle</th>
                            <th>Reading Type</th>
                            <th>Pr Reading</th>
                            <th>Prv. Reading</th>
                            <th>Advance</th>
                            <th>Meter Condition</th>
                            <th>PF</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let mrs of mrsArrayForm.controls; let i=index" [formGroup]="mrs">
                            <td>
                                <input type="number" class="form-control no-border" formControlName="customerNum"
                                    readonly>
                            </td>
                            <td>
                                <input type="text" class="form-control no-border" formControlName="customerName"
                                    readonly>
                            </td>
                            <td>
                                <input type="text" class="form-control no-border" formControlName="walkSequence"
                                    readonly>
                            </td>
                            <td>
                                <input type="text" class="form-control no-border" formControlName="meterNumber"
                                    readonly>
                            </td>
                            <td>
                                <input type="text" class="form-control no-border" formControlName="todDesc" readonly>
                            </td>
                            <td>
                                <input type="text" class="form-control no-border" formControlName="timeCycleDesc"
                                    readonly>
                            </td>
                            <td>
                                <input type="text" class="form-control no-border" formControlName="readingDescr"
                                    readonly>
                            </td>
                            <td>
                                <input type="text" class="form-control no-border" (keyup)="claculateUserUnit($event,i)"
                                    formControlName="presentReading">
                            </td>
                            <td>
                                <input type="text" class="form-control no-border" formControlName="openReading"
                                    readonly>
                            </td>
                            <td>
                                <input type="text" class="form-control no-border" formControlName="advance" readonly>
                            </td>
                            <td>
                                <input type="text" class="form-control no-border" formControlName="meterCondition">
                            </td>
                            <td>
                                <input type="text" class="form-control no-border" formControlName="powerFactor">
                            </td>

                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="row">
                <div class="col-sm-6">
                    <button *ngIf="isShow" class=" btn btnmrs mr-2 px-3 mb-lg-5 " (click)="saveMRS()">Save MRS</button>
                    <button class=" btn btncalc mr-2 px-3 mb-lg-5" (click)="calculateMrs()">Calculate Bill</button>
                    <button class=" btn btnprn  px-3 mb-lg-5" (click)="cencusBillPrint()">Bill Print</button>
                </div>
            </div>

            <div class="row ml-2" *ngIf="isShowList">
                <table class="table table-bordered col-sm-4">
                    <thead>
                        <tr class="tr1">
                            <th colspan="1">Name</th>
                            <th colspan="1">Value</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="tr3" *ngFor="let item of mrsCalculationList">
                            <td colspan="1">{{item.columnName}}</td>
                            <td colspan="1">{{item.columnValue}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </form>
    </nb-card-body>
</nb-card>

