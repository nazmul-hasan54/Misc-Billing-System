<div class="row">
    <div class="col-md-12">
        <form [formGroup]="ministryCustomerCountForm" (ngSubmit)="onReport()">
            <nb-card status="basic" *ngIf="isTrue==false">
                <nb-card-header>Ministry Customer Count</nb-card-header>
                <nb-card-body>
                    <div class="row m-1 p-1">
                        <label for="Ministry" class="col-form-label col-md-2">Ministry</label>
                        <div class="col-md-4">
                            <nb-select hero
                                fullWidth
                                formControlName="code"
                                >
                                <nb-option [value]="allMinistry">All</nb-option>
                                <nb-option *ngFor="let item of ministryDropDownData" [value]="item" >{{item.name}}</nb-option>
                            </nb-select>
                        </div>
                    </div>

                    <div class="row m-1 p-1">
                        <label for="Ministry" class="col-form-label col-md-2">Location</label>
                        <div class="col-sm-4" *ngIf="roleName=='Admin'">
                            <nb-select placeholder="Select Location" formControlName="locationCode" fullWidth>
                                <nb-option *ngFor="let item of locationNamelist" [value]="item.code">{{item.name}}</nb-option>
                            </nb-select>
                        </div>
                        <div class="col-sm-4" *ngIf="roleName !='Admin'">
                            <nb-select placeholder="Select Location" formControlName="locationCode" fullWidth>
                                <nb-option *ngFor="let item of locationFormSession"
                                    [value]="item.code">{{item.code}}-{{item.name}}</nb-option>
                            </nb-select>
                        </div>
                    </div>
                </nb-card-body>

                <nb-card-footer>
                    <button *ngIf="isProgress==false" type="submit" nbButton status="success">  Generate Report </button>
                    <button *ngIf="isProgress" type="submit" nbButton status="success" disabled>
                    <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                    Generating...
                    </button>
                </nb-card-footer>
            </nb-card>
        </form>
    </div>
</div>

<div *ngIf="isTrue==true && report !=''">
  <div class="row" >
    <div class="col-sm-12 d-flex justify-content-end pb-2">
      <nb-select placeholder="Export Type" (selectedChange)="onChangeExportType($event)">
        <nb-option *ngFor="let exportType of exportTypeList" [value]="exportType.id">{{exportType.name}}</nb-option>
      </nb-select> &nbsp;
      <button type="submit" nbButton status="info" (click)="onSearchAgain()">Search Again </button>
    </div> 
  </div>
  <ngx-pdf-viewer [report]="report" [documentTitle]="documentTitle"></ngx-pdf-viewer>
</div>
