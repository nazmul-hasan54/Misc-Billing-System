<nb-card>
    <nb-card-header class="form-header-section">Ministry Customer Details</nb-card-header>
    <nb-card-body class="container">
        <form [formGroup]="form">
            <hr class="hr-vertical" />


            <div class="row" *ngIf="isAdmin == true">
                <div class="col-sm-6">
                    <div class="form-group row">
                        <label for="customerName" class="label col-sm-4 col-form-label">Center :</label>
                        <div class="col-sm-8">
                            <nb-select formControlName="centerCode" fullWidth placeholder="Select Center"
                                (selectedChange)="getLocationByCenter($event)">
                                <nb-option *ngFor="let item of dbConfigData"
                                    [value]="item.key">{{item.value}}</nb-option>
                            </nb-select>

                        </div>
                    </div>
                </div>
                <div class="col-sm-6" *ngIf="this.formVal.centerCode != ''">
                    <div class="form-group row">
                        <label for="customerName" class="label col-sm-4 col-form-label">Location :</label>
                        <div class="col-sm-8">
                            <nb-select formControlName="locationCode" fullWidth placeholder="Select Location">
                                <nb-option *ngFor="let item of locationList"
                                    [value]="item.key">{{item.value}}</nb-option>
                            </nb-select>

                        </div>
                    </div>
                </div>
            </div>



            <div class="row">
                <div class="col-sm-6">
                    <div class="form-group row">
                        <label for="customerName" class="label col-sm-4 col-form-label">Ministry :</label>
                        <div class="col-sm-8">
                            <nb-select name="" id="" formControlName="ministryCode" fullWidth
                                placeholder="Select Ministry">
                                <nb-option [value]="''">All</nb-option>
                                <nb-option *ngFor="let item of ministryList"
                                    [value]="item.code">{{item.name}}</nb-option>
                            </nb-select>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6" *ngIf="this.formVal.ministryCode == '29'">
                    <div class="form-group row">
                        <label for="customerType" class="label col-sm-4 col-form-label">Is Rebate :</label>
                        <div class="col-sm-8">
                            <nb-checkbox status="basic" formControlName="isRebate"></nb-checkbox>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6" *ngIf="this.formVal.ministryCode == '2'">
                    <div class="form-group row">
                        <label for="customerName" class="label col-sm-4 col-form-label">Select Category :</label>
                        <div class="col-sm-8">
                            <nb-select name="" id="" formControlName="cityCode" fullWidth
                                placeholder="Select Category">
                                <nb-option *ngFor="let item of cityCorporationList"
                                    [value]="item.code">{{item.name}}</nb-option>
                            </nb-select>
                        </div>
                    </div>
                </div>
            </div>
            <!-- <div class="row"  *ngIf="this.formVal.ministryCode == '2'">
                <div class="col-sm-6"  *ngIf="this.formVal.ministryCode == '2'">
                    <div class="form-group row">
                        <label for="pouroshovaCode" class="label col-sm-4 col-form-label">Pouroshova :</label>
                        <div class="col-sm-8">
                            <nb-select name="" id="" formControlName="pouroshovaCode" fullWidth placeholder="Select Pouroshova">
                                <nb-option  *ngFor="let item of lstPouroshova" [value]="item.key">{{item.value}}</nb-option>
                            </nb-select>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6"  *ngIf="this.formVal.ministryCode == '2'">
                    <div class="form-group row">
                        <label for="unionParishadCode" class="label col-sm-4 col-form-label">Union Parishad :</label>
                        <div class="col-sm-8">
                            <nb-select name="" id=""  fullWidth formControlName="unionParishadCode" placeholder="Select Union Parishod">
                                <nb-option  *ngFor="let item of unionParishadList "  [value]="item.key">{{item.value}}</nb-option>
                            </nb-select>
                        </div>
                    </div>
                </div>
                
            </div> -->


            <div class="row">
                <div class="col-sm-6">
                    <div class="form-group row">
                        <label for="customerNumber" class="label col-sm-4 col-form-label">Customer Number :</label>
                        <div class="col-sm-8">
                            <input nbInput type="text" formControlName="customerNo" fullWidth
                                placeholder="Enter Customer Number">
                        </div>
                    </div>
                </div>
                <div class="col-sm-6" *ngIf="isAdmin == false">
                    <div class="form-group row">
                        <label for="customerName" class="label col-sm-4 col-form-label">Location :</label>
                        <div class="col-sm-8">
                            <nb-select name="" id="" formControlName="locationCode" fullWidth
                                placeholder="Select Location">
                                <nb-option *ngFor="let item of locationCode" [value]="item">{{item}}</nb-option>
                            </nb-select>
                            <!-- <input type="text" class="form-control no-border" formControlName="locationCode" readonly
                                placeholder="Location"> -->
                        </div>
                    </div>
                </div>
            </div>
            <br />

            <div class="row  mb-2">
                <div class="col-sm-2">
                </div>
                <div class="col-sm-2 ">
                    <button type="button" (click)="getMinistryCustomerBySearch()" nbButton fullWidth status="primary">
                        <i class="fa fa-search"></i> Search
                    </button> 

                    <!-- <button type="button" (click)="onReport()" class=" btn btn-info">Export</button> -->

                </div>
               
                <div class="col-sm-2">
                    <button class="btn btn-warning" type="button" nbButton fullWidth  status="warning" (click)="reset()">Reset</button>
                </div>
                <div class="col-sm-2 ">
                    <button class="btn btn-success" type="button" nbButton fullWidth status="success" (click)="CreatePage()">Add New </button>
                </div>
                <div class="col-sm-2">
                    <nb-select placeholder="Export Type" type="nbInput" (selectedChange)="onChangeExportType($event)">
                        <nb-option *ngFor="let exportType of exportTypeList" [value]="exportType.id">{{exportType.name}}</nb-option>
                    </nb-select>
                </div>
            </div>
           

        </form>

        <hr class="hr-vertical" />
        <div class="wrapper wrapper-content animated fadeInRight">
            <div class="row">
                <div class="col-lg-12">
                    <div class="ibox">
                        <div class="ibox-content">
                            <div class="table-responsive">
                                <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger"
                                    class="table table-striped table-bordered table-hover dataTables-example">
                                    <thead>
                                        <tr>
                                        <tr>
                                            <th style="width: 5%;">SN</th>
                                            <th style="width: 10%;">Zone</th>
                                            <th style="width: 10%;">Circle</th>
                                            <th style="width: 10%;">Location</th>
                                            <th style="width: 15%;">Customer No</th>
                                            <th style="width: 15%;">Customer Name</th>
                                            <th style="width: 5%;">Address</th>
                                            <th style="width: 10%;">Ministry Name</th>
                                            <th *ngIf="this.roleName == 'Admin'" style="width: 10%;">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let item of ministryCustomerList; let i =index">
                                            <th style="width: 5%;">{{i+1}}</th>
                                            <td style="width: 10%;">{{item.zoneName}}</td>
                                            <td style="width: 10%;">{{item.circleName}}</td>
                                            <td style="width: 10%;">{{item.locationCode}}</td>
                                            <td style="width: 15%;">{{item.customerNumber}}</td>
                                            <td style="width: 20%;">{{item.customerName}}</td>
                                            <td style="width: 25%;">{{item.customerAddress}}</td>
                                            <td style="width: 25%;">{{item.ministryName}}</td>

                                            <td style="width: 30%;" *ngIf="this.roleName == 'Admin'">
                                                <div class="row" >
                                                    <button style="width: 30px;" class="btn btn-sm btn-primary"
                                                        (click)="editMinistryCustomer(item)">Edit</button>&nbsp;
                                                    <button  style="width: 50px;" class="btn btn-sm btn-danger"
                                                        (click)="deleteCustomer(item.customerNumber)">Delete</button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nb-card-body>
</nb-card>