<nb-card>
    <nb-card-header class="header-section">Religious Receipt</nb-card-header>

    <nb-card-body>
        <form [formGroup]="religisreceiptForm">
            <div class="row" *ngIf="roleName == 'Admin'|| this.locationFormSession.length>1">
                <div class="col-sm-6">
                    <div class="form-group row">
                        <label for="customerType" class="label col-sm-4 col-form-label">Location <span class="text-danger">*</span>
                            :</label>
                        <div class="col-sm-8" *ngIf="roleName=='Admin'">
                            <nb-select placeholder="Select locationName" formControlName="locationCode" fullWidth>
                                <nb-option *ngFor="let item of locationNamelist" [value]="item.code">{{item.name}}</nb-option>
                            <div *ngIf="f.locationCode.touched && f.locationCode.invalid" class="alert alert-danger">
                                <div *ngIf="f.locationCode.errors?.required">Please Enter locationCode</div>
                            </div>
                            </nb-select>
                           
                        </div>
                        <div class="col-sm-8" *ngIf="roleName !='Admin'">
                            <nb-select placeholder="Select locationName" formControlName="locationCode" fullWidth>
                                <nb-option *ngFor="let item of locationFormSession"
                                    [value]="item.code">{{item.code}}-{{item.name}}</nb-option>
                                <div *ngIf="f.locationCode.touched && f.locationCode.invalid" class="alert alert-danger">
                                    <div *ngIf="f.locationCode.errors?.required">Please Enter locationCode</div>
                                </div>
                            </nb-select>
                           
                        </div>
                    </div>
                </div>
            
            </div>

            <div class="row">
                
            <div class="col-sm-2">
    
           </div>
                <div class="col-sm-2">
                    <button type="button" [disabled]="religisreceiptForm.invalid" class="btn btn-primary" (click)="GetAllReceipt()">
                        <i class="fas fa-search"></i> Search
                    </button>
                </div>
            </div>
        </form>
    </nb-card-body>
</nb-card>

<div  class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox">
                <div class="ibox-content">
                    <div class="table-responsive">
                        <table  id="example"  datatable
                      [dtOptions]="dtOptions"
                      [dtTrigger]="dtTrigger"
                      class="table table-striped table-bordered table-hover dataTables-example">
                            <thead>
                                <tr>
                                    <th class="text-center">SN</th>
                                    <th class="text-center">CustomerNo</th>
                                    <th class="text-center">Name</th>
                                    <th class="text-center">LocationCode</th>
                                    <th class="text-center">New Customer Number </th>
                                    <th class="text-center">Receipt Amount</th>
                                    <th class="text-center">Bill Month</th>
                                    
                                    

                                </tr>
                            </thead>
                            <tbody  datatable
                      [dtOptions]="dtOptions"
                      [dtTrigger]="dtTrigger"
                      class="table table-striped table-bordered table-hover dataTables-example">
                                <tr *ngFor="let receipt of religiousReceiptFormArray.controls let i =index" [formGroup]="receipt">
                                    <th scope="row">{{i+1}}</th>
                                    <th><input type="number" readonly class="form-control no-border" formControlName="customerNo"/></th>
                                    <td><input type="text" readonly class="form-control no-border" formControlName="customerName" /></td>
                                    <td><input type="text" readonly class="form-control no-border" formControlName="locationCode" /></td>
                                    <td><input type="number" class="form-control" formControlName="newCustomerNumber" maxlength="8" onkeypress="return /[0-9]/i.test(event.key)" /></td>
                                    <td><input type="number" class="form-control" formControlName="receiptAmt" onkeypress="return /[0-9]/i.test(event.key)" /></td>
                                    
                                    <td>

                                            <input type="text" fullWidth formControlName="billMonth" nbInput [bsConfig]="{
                                                           minMode: 'month',
                                                           dateInputFormat: 'MMM-YYYY',
                                                           isAnimated: true,
                                                           containerClass: 'theme-default'
                                                         }" #dp="bsDatepicker" bsDatepicker   placeholder="Enter Bill Month"
                                                maxlength="8"   (ngModelChange)="modelChangeFn($event,i)" />
                                    </td>
                                    
                                </tr>
                            </tbody>
                            <div>
                                <button type="button" [disabled]="religisreceiptForm.invalid" class="btn btn-primary d-flex align-items-center mt-3" (click)="Save()">
                                    <i class="fas fa-save"></i> Save
                                </button>
                            </div>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

