<p>Enter New App User Info.</p>

<div>

    <nb-card size="small">
        <nb-card-body>
            <form [formGroup]="newUserForm">
                <div class="row m-1 p-1">
                    <div class="col-sm-2">
                        <label class="col-form-label">User Name : <span>*</span></label>
                    </div>
                    <div class="col-sm-6">
                        <input type="text" class="form-control" fullWidth nbInput placeholder="Enter User Name"
                            formControlName="userName" [readOnly]="isReadOnly"  [ngModel]="userName"
                            [ngClass]="{'danger': (newUserForm.get('userName').touched || submit ) && newUserForm.get('userName').errors }"  autocomplete="off">
                        <div *ngIf="f.userName.touched && f.userName.invalid" class="alert alert-danger">
                            <div *ngIf="f.userName.errors?.required">Please Enter User Name</div>
                        </div>
                    </div>
                </div>

                <div class="row m-1 p-1">
                    <div class="col-sm-2">
                        <label class="col-form-label">User Id : <span>*</span></label>
                    </div>
                    <div class="col-sm-6">
                        <input type="text" class="form-control" fullWidth nbInput placeholder="Enter User Id" formControlName="userCode"
                            [readOnly]="isReadOnly" [ngModel]="userName"
                            [ngClass]="{'danger': (newUserForm.get('userCode').touched || submit ) && newUserForm.get('userCode').errors }">
                        <div *ngIf="f.userCode.touched && f.userCode.invalid" class="alert alert-danger">
                            <div *ngIf="f.userCode.errors?.required">Please Enter User Id</div>
                        </div>
                    </div>
                </div>


                    <div class="row m-1 p-1">
                        <div class="col-sm-2">
                            <label class="col-form-label">Password : <span>*</span></label>
                        </div>
                    
                        <div class="col-sm-6">
                            <input fullWidth nbInput formControlName="userPassword" type="password" class="form-control"
                                placeholder="Enter Password" autocomplete="off">
                                <div *ngIf="f.userPassword.touched && f.userPassword.invalid" class="alert alert-danger">
                                    <div *ngIf="f.userPassword.errors?.required">Please Enter Password</div>
                                </div>
                        </div>
                    </div>

                 

             
                    <div class="row m-1 p-1">
                        <div class="col-sm-2">
                            <label class="col-form-label">Db Code : <span>*</span></label>
                        </div>
                        <div class="col-sm-6">
                            <nb-select  fullWidth  placeholder="Enter Database Name" formControlName="db" (selectedChange)="onSelect($event)">
                                <nb-option *ngFor="let item of dbData" [value]="item.code">{{item.dbName}}</nb-option>
                            </nb-select>
                            <div *ngIf="f.db.touched && f.db.invalid" class="alert alert-danger">
                                <div *ngIf="f.db.errors?.required">Please Enter Db Code</div>
                            </div>
                        </div>
                    </div>
                    
                    
                    <div class="row m-1 p-1">
                        <div class="col-sm-2">
                            <label>Location Code :</label>
                        </div>
                        <div class="col-sm-6">
                            <nb-select  fullWidth placeholder="Enter location" formControlName="location">
                                <!-- <nb-option disabled selected>Select Location</nb-option> -->
                                <nb-option *ngFor="let item of locationData" [value]="item.code">{{item.name}}</nb-option>
                            </nb-select>
                        </div>
                    </div>
                

                   
                    
                            <div class="row m-1 p-1">
                                <div class="col-sm-2">
                                    <label class="col-form-label">User Designation : <span>*</span></label>
                                </div>
                                <div class="col-sm-6">
                                    <nb-select formControlName="designationCode" fullWidth placeholder="Enter Designation">
                                        <nb-option *ngFor="let item of designationList" [value]="item.designationCode">{{item.name}}</nb-option>
                                    </nb-select>
                                    <div *ngIf="f.designationCode.touched && f.designationCode.invalid" class="alert alert-danger">
                                        <div *ngIf="f.designationCode.errors?.required">Please Enter Designation</div>
                                    </div>
                                   
                                </div>
                            </div>

                <div class="row m-1 p-1">
                    <div class="col-sm-2"></div>
                    <div class="col-sm-6">
                        <button class="col-sm-3 mx-1"  [disabled]="!newUserForm.valid" nbButton status="primary" (click)="saveAppUserManagement()">Save</button>
                       
                    </div>
                </div>
            </form>
        </nb-card-body>
    </nb-card>

</div>
&nbsp;&nbsp;
<!-- Datatable area -->
<div>

    <nb-card>

        <nb-card-body>

            <div class="wrapper wrapper-content animated fadeInRight">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="ibox">
                            <div class="ibox-content">
                                <div class="table-responsive">
                                    <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger"
                                        class="table table-striped table-bordered table-hover dataTables-example">
                                        <thead>
                                            <tr>
                                            <tr>
                                                <th scope="col">SL</th>
                                                <th scope="col">User Name</th>
                                                <!-- <th scope="col">Password</th> -->
                                                <!-- <th scope="col">Mobile</th> -->
                                                <!-- <th scope="col">Email</th> -->
                                                <th scope="col">User Id</th>
                                                <!-- <th scope="col">Designation code</th> -->
                                                <th scope="col">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let item of appManagementList; let i = index">
                                                <th scope="row"> {{i + 1}} </th>
                                                <td>{{item.userName}}</td>
                                                <!-- <td>{{item.userPassword}}</td> -->
                                                <!-- <td>{{item.mobileNo}}</td> -->
                                                <!-- <td>{{item.email}}</td> -->
                                                <td>{{item.userCode}}</td>
                                                <!-- <td>{{item.designationCode}}</td> -->
                                                <td>
                                                    <i class="fas fa-edit fa-1x p-2 bg-primary text-white rounded"
                                                        (click)="editAppUserList(item)"></i>
                                                    &nbsp;
                                                    <i class="fa fa-trash fa-1x p-2 bg-danger text-white rounded"
                                                        (click)="deleteAppUser(item.userId)"></i>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nb-card-body>
    </nb-card>

</div>