<nb-card>
    <nb-card-header class="form-header-section ">
        Annual Performance Agreement (APA) Generate
    </nb-card-header>
    <hr class="hr-vertical">
    <nb-card-body>
        <form [formGroup]="apaGenerateForm">
            <!-- <h2 class="header-section">Customer Information</h2> -->
            <div class="row">
                <div class="col-sm-6">
                    <div class="form-group row">
                        <label for="customerName" class="label col-sm-4 col-form-label">কৌশলগত উদ্দেশ্য :</label>
                        <div class="col-sm-8">
                            <nb-select formControlName="stratigicCode" fullWidth
                                placeholder="কৌশলগত উদ্দেশ্য নির্বাচন করুন" (selectedChange)="getProgramList($event)">
                                <nb-option *ngFor="let item of strategicList"
                                    [value]="item.code">{{item.nameBn}}</nb-option>
                            </nb-select>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group row">
                        <label for="customerName" class="label col-sm-4 col-form-label">কার্যক্রম :</label>
                        <div class="col-sm-8">
                            <nb-select formControlName="programCode" fullWidth placeholder="কার্যক্রম নির্বাচন করুন"
                                (selectedChange)="getPerformanceList($event)">
                                <nb-option *ngFor="let item of programList"
                                    [value]="item.code">{{item.nameBn}}</nb-option>
                            </nb-select>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-6">
                    <div class="form-group row">
                        <label for="customerName" class="label col-sm-4 col-form-label">কর্ম‌সম্পাদন সূচক :</label>
                        <div class="col-sm-8">
                            <nb-select formControlName="performanceCode" fullWidth
                                placeholder="কর্ম‌সম্পাদন সূচক নির্বাচন করুন" (selectedChange)="getUnitIndexTarget($event)">
                                <nb-option *ngFor="let item of performanceList"
                                    [value]="item.code">{{item.nameBn}}</nb-option>
                            </nb-select>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group row">
                        <label for="customerName" class="label col-sm-4 col-form-label">একক :</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" formControlName="unitName"
                                placeholder="একক" readonly>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                
                <div class="col-sm-6">
                    <div class="form-group row">
                        <label class="label col-sm-4 col-form-label">সূচকের মান :</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" formControlName="indexName"
                                placeholder="সূচকের মান" readonly>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group row">
                        <label class="label col-sm-4 col-form-label">লক্ষ্যমাত্রা :</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" formControlName="targetName"
                                placeholder="লক্ষ্যমাত্রা" readonly>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group row">
                        <label for="billMonth" class="label col-sm-4 col-form-label">বিলের মাস :</label>
                        <div class="col-sm-8">
                            <input type="text" fullWidth formControlName="bMonth" nbInput [bsConfig]="{
                                minMode: 'month',
                                dateInputFormat: 'MMM-YYYY',
                                isAnimated: true,
                                containerClass: 'theme-default'
                              }" #dp="bsDatepicker" bsDatepicker (keypress)="space($event)" (ngModelChange)="dateChange($event)"
                                placeholder="বিলের মাস নির্বাচন করুন" maxlength="8" />
                        </div>
                    </div>
                </div>

                <div class="col-sm-6">
                    <div class="form-group row">
                        <label class="label col-sm-4 col-form-label">আর্থিক পরিমাণ :</label>
                        <div class="col-sm-8">
                            <input type="number" class="form-control" formControlName="financialAmount"
                                placeholder="আর্থিক পরিমাণ">
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-6">
                    <div class="form-group row">
                        <label for="comments" class="label col-sm-4 col-form-label">মন্তব্য :</label>
                        <div class="col-sm-8">
                            <textarea type="text" class="form-control" formControlName="comments" fullWidth
                                placeholder="মন্তব্য লিখুন..."></textarea>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="row">
                        <div class="col-sm-4"></div>
                        <div class="col-sm-4">
                            <button type="submit" nbButton fullWidth status="primary"
                                (click)="addAcheivement()">Add</button>
                        </div>


                    </div>
                </div>
            </div>
            

            <div class="wrapper wrapper-content animated fadeInRight">
                <div class="row">
                  <div class="col-lg-12">
                    <div class="ibox">
                      <div class="ibox-content">
                        <div class="table-responsive">
                          <table
                            class="table table-striped table-bordered table-hover dataTables-example" 
                            >
                            <thead>
                                <tr>
                                  <th class="text-center" style="width: 5%;">SN</th>
                                  <th class="text-center" style="width: 10%;">কর্ম‌সম্পাদন সূচক</th>
                                  <th class="text-center" style="width: 10%;">একক</th>
                                  <th class="text-center" style="width: 5%;">সূচকের মান</th>
                                  <th class="text-center" style="width: 5%;">লক্ষ্যমাত্রা</th>
                                  <th class="text-center" style="width: 10%;">বিলের মাস</th>
                                  <th class="text-center" style="width: 5%;">আর্থিক পরিমাণ</th>
                                  <th class="text-center" style="width: 5%;">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                              <tr *ngFor="let item of apaFormArray.value; let i =index">
                                <th class="text-center" style="width: 5%;">{{i+1}}</th>
                                <td class="text-center" style="width: 10%;">{{item.performanceName}}</td>
                                <td class="text-center" style="width: 10%;">{{item.unitName}}</td>
                                <td class="text-center" style="width: 5%;">{{item.indexName}}</td>
                                <td class="text-center" style="width: 5%;">{{item.targetName}}</td>
                                <td class="text-center" style="width: 10%;">{{item.billMonth}}</td>
                                <td class="text-center" style="width: 5%;">{{item.financialAmount}}</td>
                                <td class="text-center" style="width: 5%;">
                                    <i class="fas fa-edit fa-1x p-2 bg-primary text-white rounded"
                                    (click)="editAcheivement(item,i)"></i>
                                &nbsp;
                                <i class="fa fa-trash fa-1x p-2 bg-danger text-white rounded"
                                    (click)="deleteAcheivement(i)"></i>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

            <div class="row">
                <div class="col-sm-6">
                    <div class="row">
                        <div class="col-sm-4"></div>
                        <div class="col-sm-4">
                            <button type="submit" nbButton fullWidth status="primary" (click)="save()">Save</button>
                        </div>
                        <div class="col-sm-4">
                            <button nbButton fullWidth status="warning" (click)="refresh()">Refresh</button>
                        </div>
                    </div>
                </div>

            </div>
        </form>
    </nb-card-body>
</nb-card>